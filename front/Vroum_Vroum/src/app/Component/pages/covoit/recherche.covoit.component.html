<h2>Rechercher un covoiturage</h2>

<form (ngSubmit)="rechercher()" style="margin-bottom: 20px;">
  <div>
    <label>Ville de départ :</label>
    <input [(ngModel)]="filtres.villedep" name="villedep" placeholder="Ex : Paris" />
    <label>Code postal départ :</label>
    <input [(ngModel)]="filtres.cpdep" name="cpdep" placeholder="75000" />
  </div>

  <div>
    <label>Ville d'arrivée :</label>
    <input [(ngModel)]="filtres.villearr" name="villearr" placeholder="Ex : Lyon" />
    <label>Code postal arrivée :</label>
    <input [(ngModel)]="filtres.cparr" name="cparr" placeholder="69000" />
  </div>

  <div>
    <label>Date de départ :</label>
    <input type="datetime-local" [(ngModel)]="filtres.date" name="date" />
  </div>

  <button type="submit">Rechercher</button>
</form>

<!-- Message d'erreur ou d'absence de résultat -->
<p *ngIf="erreurMessage" style="color: red;">{{ erreurMessage }}</p>

<!-- Tableau des résultats -->
<table *ngIf="covoiturages.length > 0" border="1" cellpadding="5" cellspacing="0">
  <thead>
  <tr>
    <th>Départ</th>
    <th>Arrivée</th>
    <th>Date</th>
    <th>Distance (km)</th>
    <th>Durée (min)</th>
    <th>Places</th>
    <th>Conducteur</th>
    <th>Véhicule</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let c of covoiturages">
    <td>
      {{ c.adresseDepart.numero }} {{ c.adresseDepart.rue }},
      {{ c.adresseDepart.codePostal }} {{ c.adresseDepart.ville }}
    </td>
    <td>
      {{ c.adresseArrivee.numero }} {{ c.adresseArrivee.rue }},
      {{ c.adresseArrivee.codePostal }} {{ c.adresseArrivee.ville }}
    </td>
    <td>{{ c.date | date:'short' }}</td>
    <td>{{ c.distance }}</td>
    <td>{{ c.duree }}</td>
    <td>{{ c.vehicule ? c.vehicule.id : 'N/A' }}</td>
    <td>{{ c.organisateur?.nom || 'N/A' }}</td>
    <td>{{ c.vehicule?.marque }} {{ c.vehicule?.modele }}</td>
  </tr>
  </tbody>
</table>
